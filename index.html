<!doctype html>
<html lang="en">

    <head>
        <meta charset="utf-8">

        <title>Going Reactive with Java 8</title>

        <meta name="description" content="Java 8's lambdas make building Reactive applications a whole lot easier and cleaner. Through copious code examples this session will show you how to build event-driven, scalable, resilient, and responsive applications with Java 8, Play Framework and Akka. On the web side you will learn about using lambdas for async & non-blocking requests & WebSockets. You will also learn how the actor model in Akka pairs well with lambdas to create an event-driven foundation that provides concurrency, clustering and fault-tolerance.">
        <meta name="author" content="Typesafe">

        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

        <link rel="stylesheet" href="css/reveal.min.css">
        <link rel="stylesheet" href="css/theme/typesafe.css" id="theme">

        <!-- For syntax highlighting -->
        <link rel="stylesheet" href="lib/css/solarized_white.css">

        <!-- If the query includes 'print-pdf', use the PDF print sheet -->
        <script>
            document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
        </script>

        <!--[if lt IE 9]>
        <script src="lib/js/html5shiv.js"></script>
        <![endif]-->
    </head>

    <body>

        <div class="reveal">

            <!-- Any section element inside of this container is displayed as a slide -->
            <div class="slides">

                <section data-background-color="#103a51">
                    <h2 class="tsWhite">Going Reactive with Java 8</h2>
                    <a href="http://www.typesafe.com"><img src="assets/typesafe-logo-reverse.png" height=100px></a>
                </section>

                <section data-background="assets/typesafe.png" data-background-size="15%" data-background-repeat="no-repeat" data-background-position="24px 95%">
                    <h2>Users Want</h2>
                    <ul>
                        <li class="fragment">In-Sync Data</li>
                        <li class="fragment">Real-time Collaboration</li>
                        <li class="fragment">Instant Feedback</li>
                        <li class="fragment">To Not Wait</li>
                    </ul>
                </section>

                <section data-background="assets/typesafe.png" data-background-size="15%" data-background-repeat="no-repeat" data-background-position="24px 95%">
                    <h2>Users Want Reactive Apps</h2>
                    <h3 class="tsBlueText">www.ReactiveManifesto.org</h3>

                    <img src="assets/full-reactive.png">
                </section>

                <section data-background="assets/typesafe-logo-reverse.png" data-background-color="#92d13d" data-background-size="15%" data-background-repeat="no-repeat" data-background-position="24px 95%">
                    <h2 class="tsWhite">Reactive Web Apps with<br>Play Framework</h2>
                    <img src="assets/play-logo-reverse.png" height="100px">
                </section>

                <section data-background="assets/typesafe.png" data-background-size="15%" data-background-repeat="no-repeat" data-background-position="24px 95%">
                    <h2>Reactive Web Apps with<br>Play Framework</h2>

                    <ul>
                        <li class="fragment">Reactive Requests</li>
                        <li class="fragment">Reactive Composition</li>
                        <li class="fragment">Reactive Push</li>
                        <li class="fragment">2-Way Reactive</li>
                    </ul>
                </section>

                 <section data-markdown data-background="assets/typesafe.png" data-background-size="15%" data-background-repeat="no-repeat" data-background-position="24px 95%">
                    <script type="text/template">
                        ## Routes
                        ### Declarative, Type-safe URL Mapping

                            VERB    PATH                CONTROLLER_METHOD

                            GET     /                   controllers.Application.index()
                            GET     /foo                controllers.Application.foo()
                    </script>
                </section>

                 <section data-markdown data-background="assets/typesafe.png" data-background-size="15%" data-background-repeat="no-repeat" data-background-position="24px 95%">
                    <script type="text/template">
                        ## Controllers
                        ### Synchronous Request

                        <small>Useful for requests that dont have anything to not block on</small>

                        ```java
                            public static Result syncFoo() {
                                return ok("sync foo");
                            }
                        ```
                    </script>
                </section>

                <section data-background="assets/typesafe.png" data-background-size="15%" data-background-repeat="no-repeat" data-background-position="24px 95%">
                    <h2>Reactive Requests</h2>
                    <img src="assets/reactive-requests.png">
                </section>

                <section data-background="assets/typesafe.png" data-background-size="15%" data-background-repeat="no-repeat" data-background-position="24px 95%" data-markdown>
                    <script type="text/template">
                        ### Asynchronous Request

                        <small>Under the covers Play implements all requests in this way</small>

                        ```java
                            public static F.Promise<Result> asyncFoo() {
                                return F.Promise.promise(() -> ok("async foo"));
                            }
                        ```
                    </script>
               </section>

                <section data-background="assets/typesafe.png" data-background-size="15%" data-background-repeat="no-repeat" data-background-position="24px 95%" data-markdown>
                    <script type="text/template">
                        ### Reactive Request (Async + Non-Blocking)

                        <small>Needs to have something to not block on</small>

                        ```java
                           public static Integer longRunningCalculation() {
                                return (5134 * 5789) / 349;
                           }

                           public static F.Promise<Result> basicPromise() {
                                F.Promise<Integer> promise = F.Promise.promise(() -> longRunningCalculation());
                                return promise.map((Integer i) -> ok("The calculation result is: " + i));
                           }
                        ```
                    </script>
                </section>

                <section data-background="assets/typesafe.png" data-background-size="15%" data-background-repeat="no-repeat" data-background-position="24px 95%" data-markdown>
                    <script type="text/template">
                        ### Reactive Requests

                        <small>Two chained requests (client to server & server to typesafe.com) - both async & non-blocking</small>

                        ```java
                            public static F.Promise<Result> reactiveRequest() {
                                F.Promise<WS.Response> typesafePromise = WS.url("http://www.typesafe.com").get();
                                return typesafePromise.map(response -> ok(response.getBody()));
                            }
                        ```
                    </script>
                </section>

                <section data-background="assets/typesafe.png" data-background-size="15%" data-background-repeat="no-repeat" data-background-position="24px 95%" data-markdown>
                    <script type="text/template">
                        ### Reactive Composition

                        <small>Three requests, two in parrallel (depending on thread availability), - all async & non-blocking</small>

                        ```java
                            public static F.Promise<Result> reactiveComposition() {
                                final F.Promise<WS.Response> twitterPromise = WS.url("http://www.twitter.com").get();
                                final F.Promise<WS.Response> typesafePromise = WS.url("http://www.typesafe.com").get();

                                return twitterPromise.flatMap((twitter) ->
                                    typesafePromise.map((typesafe) ->
                                        ok(twitter.getBody() + typesafe.getBody())));
                            }
                        ```
                    </script>
                </section>

                <section data-background="assets/typesafe.png" data-background-size="15%" data-background-repeat="no-repeat" data-background-position="24px 95%" data-markdown>
                    <script type="text/template">
                        ### Reactive Push with SSE

                        <small>Async & Non-Blocking Server to Client Push</small>

                        <small>Java Controller</small>

                        ```java
                            public static Result events() {
                                EventSource eventSource = new EventSource() {
                                    public void onConnected() {
                                        sendData("hello");
                                    }
                                };
                                return ok(eventSource);
                            }
                        ```

                        <small>CoffeeScript Client</small>

                        ```coffescript
                            events = new EventSource("/events")
                            events.onmessage = (e) ->
                                alert(e.data)
                        ```
                    </script>
                </section>

                <section data-background="assets/typesafe.png" data-background-size="15%" data-background-repeat="no-repeat" data-background-position="24px 95%" data-markdown>
                    <script type="text/template">
                        ### 2-Way Reactive with WebSockets

                        <small>Bi-directional reactive push</small>

                        <small>Java Controller with Java 8 Method Reference</small>

                         ```java
                            public static WebSocket<String> echo() {
                                return new WebSocket<String>() {
                                    public void onReady(final In<String> in, final Out<String> out) {
                                        in.onMessage(out::write);
                                    }
                                };
                            }
                        ```

                        <small>CoffeeScript Client</small>

                        ```coffescript
                            ws = new WebSocket("ws://localhost:9000/echo")
                            ws.onmessage = (message) ->
                                console.log(message.data)
                            ws.onopen = () ->
                                ws.send("foo")
                        ```
                    </script>
                </section>

                <section data-background="assets/typesafe-logo-reverse.png" data-background-color="#2e6d82" data-background-size="15%" data-background-repeat="no-repeat" data-background-position="24px 95%">
                    <h2 class="tsWhite">Reactive Apps with Akka</h2>
                    <p>
                    <img src="assets/akka-logo-reverse.png" height="150px">
                </section>

                <section data-background="assets/typesafe.png" data-background-size="15%" data-background-repeat="no-repeat" data-background-position="24px 95%">
                    <h2>Reactive Apps with Akka</h2>

                    <ul>
                        <li class="fragment">Actor Based</li>
                        <li class="fragment">Highly Concurrent</li>
                        <li class="fragment">Asynchronous</li>
                        <li class="fragment">Distributable</li>
                        <li class="fragment">Scales Up & Out</li>
                    </ul>
                </section>

                <section data-background="assets/typesafe.png" data-background-size="15%" data-background-repeat="no-repeat" data-background-position="24px 95%">
                    <h2>Akka Actor Properties</h2>

                    <ul>
                        <li class="fragment">Message Based</li>
                        <li class="fragment">Event Driven</li>
                        <li class="fragment">Non-Request Based Lifecycle</li>
                        <li class="fragment">Isolated Failure Handling<br>(Supervision)</li>
                    </ul>
                </section>

                <section data-background="assets/typesafe.png" data-background-size="15%" data-background-repeat="no-repeat" data-background-position="24px 95%" data-markdown>
                    <script type="text/template">
                        ### Actors with Lambdas
                        <p>Easily define the behavior of your actor</p>

                        ```java
                            public static class Greeter extends AbstractActor {
                              String greeting = "";

                              public Greeter() {
                                receive(ReceiveBuilder.
                                  match(WhoToGreet.class, message -> greeting = "hello, " + message.who).
                                  match(Greet.class, message -> sender().tell(new Greeting(greeting), self())).
                                  build());
                              }
                            }
                        ```
                    </script>
                </section>

               <section data-background="assets/typesafe.png" data-background-size="15%" data-background-repeat="no-repeat" data-background-position="24px 95%" data-markdown>
                    <script type="text/template">
                        ### Handing off Work
                        <p>For responsiveness and/or fault tolerance</p>

                        ```java
                          public class HandoffActor extends AbstractActor {{
                            receive(ReceiveBuilder.matchEquals("hello", s -> {
                              ActorRef worker =
                                context().actorOf(Props.create(AbstractActor.class,
                                  () -> new AbstractActor() {{
                                    receive(ReceiveBuilder.
                                      match(String.class, s -> {
                                        sender().tell(s.toUpperCase(), self());
                                        self().tell(PoisonPill.getInstance(), self());
                                      }).build());
                                  }}));
                              worker.forward(s, context());
                            }).build());
                          }}
                        ```
                    </script>
                </section>

               <section data-background="assets/typesafe.png" data-background-size="15%" data-background-repeat="no-repeat" data-background-position="24px 95%" data-markdown>
                    <script type="text/template">
                        ### Supervision with Lambdas 
                        <p>Take different actions depending on the failure</p>

                        ```java
                            private static SupervisorStrategy strategy =
                              new OneForOneStrategy(10, Duration.create("1 minute"), DeciderBuilder.
                                match(ArithmeticException.class, e -> resume()).
                                match(NullPointerException.class, e -> restart()).
                                match(IllegalArgumentException.class, e -> stop()).
                                matchAny(o -> escalate()).build());

                            @Override
                            public SupervisorStrategy supervisorStrategy() {
                              return strategy;
                            }
                        ```
                    </script>
                </section>

               <section data-background="assets/typesafe.png" data-background-size="15%" data-background-repeat="no-repeat" data-background-position="24px 95%" data-markdown>
                    <script type="text/template">
                        ### Changing Behavior with Lambdas
                        <p>Quickly implement changes in behavior</p>

                        ```java
                           public class Swapper extends AbstractLoggingActor {
                             public Swapper() {
                               receive(ReceiveBuilder.
                                 matchEquals(Swap, s -> {
                                   log().info("Hi");
                                   context().become(ReceiveBuilder.
                                     matchEquals(Swap, x -> {
                                       log().info("Ho");
                                       context().unbecome(); // go back to previous behavior
                                     }).build(), false); // push on top keep old behavior
                                 }).build());
                             }
                           }
                        ```
                    </script>
                </section>

               <section data-background="assets/typesafe.png" data-background-size="15%" data-background-repeat="no-repeat" data-background-position="24px 95%" data-markdown>
                    <script type="text/template">
                        ### Creating Finite State Machines
                        <p class="tsBlueText">TODO</p>
                    </script>
                </section>

               <section data-background="assets/typesafe.png" data-background-size="15%" data-background-repeat="no-repeat" data-background-position="24px 95%" data-markdown>
                    <script type="text/template">
                        ### Show Java/Scala interop library
                        <p class="tsBlueText">TODO</p>
                    </script>
                </section>

                <section data-background="assets/typesafe-logo-reverse.png" data-background-color="#53cdec" data-background-size="15%" data-background-repeat="no-repeat" data-background-position="24px 95%">
                    <h3 class="tsWhite">Demo: Reactive Stocks (Java 8)</h3>

                    <ul class="tsWhite">
                        <li>Get the Activator Template: *** TODO ***</li>
                        <li>Akka Actors for thread-safe state and non-request based events</li>
                        <li>Play Framework for Reactive Composition, Reactive Push, and a JavaScript UI</li>
                    </ul>
                </section>

                <section data-background="assets/typesafe-logo-reverse.png" data-background-color="#f16665" data-background-size="15%" data-background-repeat="no-repeat" data-background-position="24px 95%">
                    <h3 class="tsWhite">Get Started with Activator</h3>

                    <ul class="tsWhite">
                        <li>Hello Akka (Java 8)  *** TODO ***</li>
                        <li>Go Reactive with Java 8 and Play Framework *** TODO ***</li>
                        <li>Finite State Machines with Actors and Java 8  *** TODO ***</li>
                        <li>Supervision with Actors and Java 8  *** TODO ***</li>
                        <li>Akka Persistence with Actors and Java 8  *** TODO ***</li>
                    </ul>
                </section>

                <section data-background-color="#103a51">
                    <a href="http://www.typesafe.com"><img src="assets/typesafe-logo-reverse.png" height=200px></a>
                </section>
            </div>

        </div>

        <script src="lib/js/head.min.js"></script>
        <script src="js/reveal.min.js"></script>

        <script>

            // Full list of configuration options available here:
            // https://github.com/hakimel/reveal.js#configuration
            Reveal.initialize({
                controls: true,
                progress: true,
                history: true,
                center: true,

                // The "normal" size of the presentation, aspect ratio will be preserved
                // when the presentation is scaled to fit different resolutions. Can be
                // specified using percentage units.
                width: 1280,
                height: 800,

                // Factor of the display size that should remain empty around the content
                margin: 0.1,

                // Bounds for smallest/largest possible scale to apply to content
                minScale: 0.2,
                maxScale: 2.0,

                theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
                transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

                // Parallax scrolling
                // parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
                // parallaxBackgroundSize: '2100px 900px',

                // Optional libraries used to extend on reveal.js
                dependencies: [
                    { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
                    { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
                    { src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
                    { src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
                ]
            });

        </script>

    </body>
</html>
